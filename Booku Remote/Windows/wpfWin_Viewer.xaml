<Window x:Class="wpfWin_Viewer"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Booku Remote - Viewer"
        Height="600"
        Width="900"
        MinHeight="400"
        MinWidth="600"
        WindowStartupLocation="CenterScreen"
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResize"
        Background="#1E1E1E">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/BookuID.Styles;component/WPF/Styles/StyleAplikasi.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <Border Grid.Row="0"
                Background="{StaticResource clrStatusBarBg}"
                BorderBrush="{StaticResource clrBorderDefault}"
                BorderThickness="0,0,0,1"
                Padding="10,8">
            <DockPanel>
                <!-- Kiri: Info Koneksi -->
                <StackPanel DockPanel.Dock="Left" Orientation="Horizontal">
                    <TextBlock Text="&#xE703;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="16"
                               Foreground="{StaticResource clrBtnPrimerBg}"
                               VerticalAlignment="Center"/>
                    <TextBlock Name="lbl_NamaHost"
                               Text="Host: -"
                               Margin="8,0,0,0"
                               Foreground="{StaticResource clrTeksPrimer}"
                               VerticalAlignment="Center"/>
                    <TextBlock Name="lbl_AlamatIPHost"
                               Text="(0.0.0.0)"
                               Margin="8,0,0,0"
                               Foreground="{StaticResource clrTeksSekunder}"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Kanan: Tombol Aksi -->
                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                    <!-- Toggle Kontrol (Fase 2b) -->
                    <ToggleButton Name="tgl_Kontrol"
                                  Content="&#xE962;"
                                  FontFamily="Segoe MDL2 Assets"
                                  FontSize="14"
                                  Padding="10,5"
                                  Margin="0,0,10,0"
                                  Background="Transparent"
                                  Foreground="{StaticResource clrTeksSekunder}"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource clrBorderDefault}"
                                  ToolTip="Aktifkan Kontrol Keyboard/Mouse (Ctrl+K)"
                                  IsEnabled="False"/>
                    <!-- Button Transfer Berkas (Fase 3b) -->
                    <Button Name="btn_Transfer"
                            Content="&#xE8A5;"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="14"
                            Padding="10,5"
                            Margin="0,0,10,0"
                            Background="Transparent"
                            Foreground="{StaticResource clrTeksSekunder}"
                            BorderThickness="1"
                            BorderBrush="{StaticResource clrBorderDefault}"
                            ToolTip="Transfer Berkas"
                            IsEnabled="False"/>
                    <!-- Toggle Clipboard (Fase 3a) -->
                    <ToggleButton Name="tgl_Clipboard"
                                  Content="&#xE77F;"
                                  FontFamily="Segoe MDL2 Assets"
                                  FontSize="14"
                                  Padding="10,5"
                                  Margin="0,0,10,0"
                                  Background="Transparent"
                                  Foreground="{StaticResource clrTeksSekunder}"
                                  BorderThickness="1"
                                  BorderBrush="{StaticResource clrBorderDefault}"
                                  ToolTip="Aktifkan Sinkronisasi Clipboard"
                                  IsEnabled="False"/>
                    <Button Name="btn_Fullscreen"
                            Content="&#xE740;"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="14"
                            Padding="10,5"
                            Margin="0,0,5,0"
                            Background="Transparent"
                            Foreground="{StaticResource clrTeksPrimer}"
                            BorderThickness="0"
                            ToolTip="Fullscreen (F11)"/>
                    <Button Name="btn_Putuskan"
                            Content="&#xE711;  Putuskan"
                            FontFamily="Segoe MDL2 Assets, Segoe UI"
                            Style="{StaticResource styleButtonDasar}"
                            Padding="12,5"
                            Background="{StaticResource clrStatusError}"
                            Foreground="White"/>
                </StackPanel>

                <!-- Tengah: Kualitas/FPS -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="Skala:"
                               Foreground="{StaticResource clrTeksSekunder}"
                               VerticalAlignment="Center"
                               Margin="0,0,5,0"/>
                    <ComboBox Name="cmb_Skala"
                              Width="80"
                              VerticalAlignment="Center"
                              SelectedIndex="1">
                        <ComboBoxItem Content="25%"/>
                        <ComboBoxItem Content="50%"/>
                        <ComboBoxItem Content="75%"/>
                        <ComboBoxItem Content="100%"/>
                    </ComboBox>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Konten Utama: Viewer Layar -->
        <Border Grid.Row="1" Background="#1E1E1E">
            <Grid>
                <!-- Image untuk menampilkan frame -->
                <Image Name="img_Layar"
                       Stretch="Uniform"
                       RenderOptions.BitmapScalingMode="HighQuality"
                       Focusable="True"
                       Cursor="Arrow"
                       ForceCursor="True"/>

                <!-- Loading/Waiting Overlay -->
                <Border Name="bdr_Loading"
                        Background="#80000000"
                        Visibility="Visible">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="&#xE895;"
                                   FontFamily="Segoe MDL2 Assets"
                                   FontSize="48"
                                   Foreground="White"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Name="lbl_StatusLoading"
                                   Text="Menunggu streaming dari Host..."
                                   FontSize="14"
                                   Foreground="White"
                                   HorizontalAlignment="Center"
                                   Margin="0,15,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Error Overlay -->
                <Border Name="bdr_Error"
                        Background="#80000000"
                        Visibility="Collapsed">
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Text="&#xE783;"
                                   FontFamily="Segoe MDL2 Assets"
                                   FontSize="48"
                                   Foreground="#F44336"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Name="lbl_Error"
                                   Text="Koneksi terputus"
                                   FontSize="14"
                                   Foreground="White"
                                   HorizontalAlignment="Center"
                                   Margin="0,15,0,0"/>
                        <Button Name="btn_Reconnect"
                                Content="Coba Sambung Ulang"
                                Style="{StaticResource styleButtonPrimer}"
                                Margin="0,20,0,0"
                                Padding="20,8"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- Status Bar -->
        <Border Grid.Row="2"
                Background="{StaticResource clrStatusBarBg}"
                BorderBrush="{StaticResource clrBorderDefault}"
                BorderThickness="0,1,0,0"
                Padding="10,5">
            <DockPanel>
                <!-- Kiri: Status Koneksi dan Kontrol -->
                <StackPanel DockPanel.Dock="Left" Orientation="Horizontal">
                    <Ellipse Name="elp_StatusIndicator"
                             Width="8" Height="8"
                             Fill="{StaticResource clrStatusSukses}"
                             VerticalAlignment="Center"/>
                    <TextBlock Name="lbl_StatusKoneksi"
                               Text="Terhubung"
                               Margin="6,0,0,0"
                               Foreground="{StaticResource clrTeksPrimer}"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                    <!-- Status Kontrol (Fase 2b) -->
                    <Border Margin="15,0,0,0"
                            Padding="6,2"
                            CornerRadius="3"
                            Background="{StaticResource clrBgPanel}"
                            VerticalAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE962;"
                                       FontFamily="Segoe MDL2 Assets"
                                       FontSize="10"
                                       Foreground="{StaticResource clrTeksSekunder}"
                                       VerticalAlignment="Center"/>
                            <TextBlock Name="lbl_StatusKontrol"
                                       Text="Kontrol: OFF"
                                       Margin="4,0,0,0"
                                       Foreground="{StaticResource clrTeksSekunder}"
                                       FontSize="11"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                    <!-- Status Clipboard (Fase 3a) -->
                    <Border Margin="10,0,0,0"
                            Padding="6,2"
                            CornerRadius="3"
                            Background="{StaticResource clrBgPanel}"
                            VerticalAlignment="Center">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE77F;"
                                       FontFamily="Segoe MDL2 Assets"
                                       FontSize="10"
                                       Foreground="{StaticResource clrTeksSekunder}"
                                       VerticalAlignment="Center"/>
                            <TextBlock Name="lbl_StatusClipboard"
                                       Text="Clipboard: OFF"
                                       Margin="4,0,0,0"
                                       Foreground="{StaticResource clrTeksSekunder}"
                                       FontSize="11"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Kanan: Info Teknis -->
                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                    <TextBlock Text="Frame:"
                               Foreground="{StaticResource clrTeksSekunder}"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                    <TextBlock Name="lbl_FrameCount"
                               Text="0"
                               Margin="4,0,15,0"
                               Foreground="{StaticResource clrTeksPrimer}"
                               FontSize="11"
                               VerticalAlignment="Center"/>

                    <TextBlock Text="FPS:"
                               Foreground="{StaticResource clrTeksSekunder}"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                    <TextBlock Name="lbl_FPS"
                               Text="0"
                               Margin="4,0,15,0"
                               Foreground="{StaticResource clrTeksPrimer}"
                               FontSize="11"
                               VerticalAlignment="Center"/>

                    <TextBlock Text="Latency:"
                               Foreground="{StaticResource clrTeksSekunder}"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                    <TextBlock Name="lbl_Latency"
                               Text="0 ms"
                               Margin="4,0,15,0"
                               Foreground="{StaticResource clrTeksPrimer}"
                               FontSize="11"
                               VerticalAlignment="Center"/>

                    <TextBlock Text="Size:"
                               Foreground="{StaticResource clrTeksSekunder}"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                    <TextBlock Name="lbl_FrameSize"
                               Text="0 KB"
                               Margin="4,0,0,0"
                               Foreground="{StaticResource clrTeksPrimer}"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Tengah: Durasi -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="Durasi:"
                               Foreground="{StaticResource clrTeksSekunder}"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                    <TextBlock Name="lbl_Durasi"
                               Text="00:00:00"
                               Margin="4,0,0,0"
                               Foreground="{StaticResource clrTeksPrimer}"
                               FontSize="11"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </DockPanel>
        </Border>
    </Grid>
</Window>
